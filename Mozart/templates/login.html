{% extends 'base_view.html' %}
{% block title %}Login - mozArt{% endblock %}
{% block content %}
      <div class="mozart-form" ng-init="modalShown = true">
        <h2>Inicia sesión con tu correo electrónico</h2>
        {% if form.non_field_errors %}
    {% ifnotequal form.non_field_errors.as_text|cut:"* " "$message" %}
    <div ng-controller="modalCtrl" ng-init="modalShown=true"> <modal-dialog show="modalShown" modal-title="No se pudo iniciar sesión">
      <div class="modal-dialog-content">{{form.non_field_errors.as_text|cut:"$message"|cut:"* "}}</div>
      <a class="boton boton-azul" ng-click="toggleModal()">Entendido</a>
    </modal-dialog></div>
   
  {% endifnotequal %}
{% endif %}
        <form action="" method="post" id="id_loginform" name="{{form.form_name}}" novalidate>
          {% csrf_token %}
          <div class="mozart-field-container one-element initial-state">
            {{form.username}}
            <label for="id_username" class="mozart-label show-label">Nickname</label>
          </div>

          <div class="form-error" ng-show="loginform.username.$error.required && loginform.username.$dirty">No puedes dejar este campo vacío.</div>

          <div class="form-error" ng-show="loginform.username.$error.minlength">El username debe contener al menos 5 carácteres.</div>

          <div class="form-error" ng-show="loginform.username.$error.maxlength">El username debe contener máximo 20 carácteres.</div>

          <div class="mozart-field-container one-element initial-state">
            {{form.password}}
            <label for="id_password" class="mozart-label show-label">Password</label>
          </div><br/>
          
          <div class="form-error" ng-show="loginform.password.$error.required && loginform.password.$dirty">No puedes dejar este campo vacío.</div>

          <div class="form-error" ng-show="loginform.password.$error.minlength">El username debe contener al menos 8 carácteres.</div>

          <div class="form-error" ng-show="loginform.password.$error.maxlength">El username debe contener máximo 30 carácteres.</div>
          
          <a href="/forget" title="Da clic para recuperar tu contraseña">Olvide mi contraseña</a><br/>
          <button type="submit" class="boton boton-verde" name="Enviar" ng-disabled="loginform.$invalid">Iniciar sesión</button>
        </form>
        <h2>O desde alguna de tus redes sociales vinculadas</h2>
        <div class="vincula">
          <a class="iconos icono-facebook" href="{% url 'social:begin' 'facebook' %}">Iniciar sesión con Facebook</a>
          <a class="iconos icono-twitter" href="{% url 'social:begin' 'twitter' %}">Iniciar sesión con Twitter</a>
          <a class="iconos icono-google" href="{% url 'social:begin' 'google-oauth2' %}">Iniciar sesión con Google</a>
        </div>
      </div>{% endblock %}
  